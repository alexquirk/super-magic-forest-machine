<!DOCTYPE html>
<html lang="en">

<!-- HEAD-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Magic Forest Machine</title>
    <link rel="stylesheet" href="SMFMstyles.CSS">
    <style> @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=Press+Start+2P&display=swap'); </style>
</head>
<body>


<!-- THE MACHINE -->

<article id="themachine">

    <div class="borders"></div>
    <img id="map" src="./roomimages/smfmroom1.png" alt="room 1">
    <div class="outputarea">
        <div id="output">You open your eyes and find yourself in a forest clearing. 
            In front of you stands a wooden <span>door frame</span>.
            <br><br>
            You try to remember how you got here, but your mind is fuzzy. "Guess I fell asleep," you think to yourself.
            <br><br>
            Try <span>looking around</span>.
        </div>
    </div>
    <div class="inputarea">
        <input type="text" id="userinput" maxlength="25">
        <input type="button" id="enterbutton" value="ENTER">
    </div>
    <div class="borders"></div>
</article>

</body>


<!-- SCRIPT -->
<script>

//DECLARE VARIABLES
    const userInput = document.getElementById('userinput');
    const output = document.getElementById('output');
    const enterButton = document.getElementById('enterbutton');
    let roomNum = 1;
    let doorUnlocked = false;
    let haveFlower = false;
    let boxUnlocked = false;
    let marbleDown = false;
    let ropeTaken = false;
    let haveRope = false;
    let ropeSet = false;
    let haveBox = false;
    let haveBoxKey = false;
    let mugTaken = false;
    let haveMug = false;
    let ghostGivenMug = false;
    let robotAwake = false;
    let haveCrystal = false;
    let haveFireflies = false;
    let firefliesReleased = false;
    let electroVineTaken = false;
    let catDiscovered = false;

// ROOM SWITCHING FUNCTIONS

    const room4Switch = () => {
        if (marbleDown === false) {return document.getElementById("map").src="./roomimages/smfmroom4a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom4b.png"};
    };
    const room10Switch = () => {
        if (ropeSet === false) {return document.getElementById("map").src="./roomimages/smfmroom10a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom10b.png"};
    }; 
    const room12Switch = () => {
        if (robotAwake === false) {return document.getElementById("map").src="./roomimages/smfmroom12a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom12b.png"};
    }; 
    const room7Switch = () => {
        if (firefliesReleased === false) {return document.getElementById("map").src="./roomimages/smfmroom7a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom7b.png"};
    }; 
    const room9Switch = () => {
        if (ghostGivenMug === false) {return document.getElementById("map").src="./roomimages/smfmroom9a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom9b.png"};
    }; 
    const room6Switch = () => {
        if (ropeTaken === false) {return document.getElementById("map").src="./roomimages/smfmroom6a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom6b.png"};
    }; 

// USER INPUT
    const inp = (arg) => {
        return userInput.value.toLowerCase().includes(arg);
    }
    const processinput = () => {
        switch (true) {
    
        // GLOBAL
            case inp("hint") || inp("help"):
                output.innerHTML = "Try <span>looking around</span>, <span>walking</span> in a direction, or <span>inspecting</span> objects.<br><br>You can also <span>take</span> objects, <span>use</span> objects, or <span>check pockets</span> to see what objects you have with you.";
                break;
            case inp("nap") || inp("sleep"):
                output.innerHTML = "You're not really tired.";
                break; 
            case inp('chill') || (inp('not') && inp('much')):
                output.innerHTML = "cool cool";
                break;
            case inp('hello') || inp('hi'):
                output.innerHTML = "Hi :)";
                break;
            case inp('what') && inp('up'):
                output.innerHTML = "Nothing much, hbu";
                break;
            case inp('reset'):
                roomNum = 1;
                document.getElementById("map").src="./roomimages/smfmroom1.png";
                userInput.value = "";
                output.innerHTML = "";
                break;
            
        // TRAVEL

            // GOING EAST
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('east')||inp('right'))  :
                switch (roomNum) {
                    case 1:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 6;
                        room6Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 11:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 10:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png"
                        output.innerHTML = "";
                        break;
                    case 2:
                        roomNum = 9;
                        room9Switch();
                        output.innerHTML = "";
                        break;
                    case 12:
                        roomNum = 5;
                        room4Switch();
                        document.getElementById("map").src="./roomimages/smfmroom5.png"
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            output.innerHTML = "There's nowhere to go that way."
                        };
                        break;
                };
                break;

            // GOING NORTH
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('north')||inp('up')||inp('straight')||inp('forward'))   :
                switch (roomNum) {
                    case 3:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 1:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 6:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 12:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 10:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            output.innerHTML = "There's nowhere to go that way."
                        };
                        break;
                    case 11:
                        roomNum = 7;
                        room7Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                };
                break;

            // GOING WEST
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('west')||inp('left'))   :
                switch (roomNum) {
                    case 3:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 2:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 6:
                        roomNum = 5;
                        document.getElementById("map").src="./roomimages/smfmroom5.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 9:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 1:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 12;
                        room12Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            roomNum = 8;
                            output.innerHTML = ""
                        }
                        userInput.value = "";
                        break;

                };
                break;

            // GOING SOUTH
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('south')||inp('down'))   :
                switch (roomNum) {
                    case 2:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 1:
                        roomNum = 5;
                        document.getElementById("map").src="./roomimages/smfmroom5.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 3:
                        roomNum = 6;
                        room6Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - you've never been that great of a swimmer.";
                        break;
                    case 6:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - you've never been that great of a swimmer.";
                        break;
                    case 12:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - you've never been that great of a swimmer.";
                        break;
                    case 7:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 11:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 10:
                        roomNum = 12;
                        room12Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    
                };
                break;

            // DEFAULT TRAVEL
            case (inp("walk")||inp('go')||inp('travel')):
                userInput.value = "";
                output.innerHTML = "Where do you want to go?";
                break;

            // ROOM 1
            case roomNum === 1 &&    (inp('open')||inp('try')||inp('use'))    &&    (inp('door')||inp('handle')||inp("knob"))     :
                output.innerHTML = "The door is locked.";
                break;
            case roomNum === 1 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "In front of you, a <span>door frame</span> stands in the middle of a forest clearing scattered with stones and flowers. To the <span>north</span> and <span>east</span> the forest grows dark and dense. Behind you to the <span>south</span>, you can hear the distant sound of running water. To the <span>west</span> you can see a rocky outcropping.";
                break;
            case roomNum === 1 &&    (inp('inspect')||inp('look')||inp('search'))    &&    (inp('door')||inp('frame'))     :
                output.innerHTML = "The <span>door</span> and it's <span>frame</span> are made of a hearty oak wood. It's worn, but sturdy. Something tells you it's been hear a long time.";
                break;
            case roomNum === 1 &&    inp('unlock')   &&    (inp('door')||inp('handle'))   &&  doorUnlocked === false  :
                output.innerHTML = "You don't have the <span>key</span>. Maybe it's nearby?";
                break;
            case roomNum === 1 &&    (inp('look')||inp('inspect')||inp('try'))   &&    (inp('lock')||inp('handle')||inp('knob'))     :
                output.innerHTML = "The door's gnob and lock are simple and a bit rusty, but strong. You try to push it open, but it won't budge.";
                break;
            case roomNum === 1 &&    inp('knock') || inp('nok'):
                output.innerHTML = "You knock on the door, but nothing happens.";
                break;
            case roomNum === 1 &&    inp('who') || inp('there'):
                output.innerHTML = "Lol you thought.";
                break;

            // ROOM 3
            case roomNum === 3 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest is a bit darker here. There is a <span>stump</span> in the middle of the clearing. The forest is too dense to travel any further east from here.";
                break;
            case roomNum === 3 &&    (inp('inspect')||inp('look')||inp('search'))    &&    (inp('stump'))     :
                output.innerHTML = "Looks like a good place to sit and rest. You wonder how long ago the tree was cut down, but you're stumped.";
                break;
            case roomNum === 3 &&    (inp('sit')||inp('rest'))     :
                output.innerHTML = "You sit down on the stump to rest for a minute. It's comfier than you would have thought.";
                break;

            // ROOM 2
            case roomNum === 2 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest is much denser and darker here, the the air is filled with <span>fireflies</span> that bathe the woods in a warm light.";
                break;
            case roomNum === 2 &&    (inp('inspect')||inp('look')||inp('search'))    &&    (inp('fire'))     :
                output.innerHTML = "You've never seen <span>fireflies</span> this bright before! They illuminate the whole forest.";
                break;
            case (inp('catch')||inp('take')||inp('gather')||inp('grab'))   &&    inp('firefl')    :
                output.innerHTML = 'After a couple attempts, you catch a <span>firefly</span> in you hands. You cup it gently and its soft glow illuminates your fingers. After a few moments, you release it to join the others.<br><br>"If only I had somewhere to keep it," you think.';
                break;

            // ROOM 4
            case roomNum === 4 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest isdarker here. A big tree stands in the middle of the clearing.";
                break;

            // ROOM 5
            case roomNum === 5 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "What a lovely lake! If only you'd brough a beach umbrella.";
                break;

            // ROOM 6
            case roomNum === 6 &&  ropeTaken === false &&  (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "You're standing on the shore of a lovely lake. There is a boat tied to a mooring nearby, but it doesn't exactly look seaworthy.";
                break;
            case roomNum === 6 &&   ropeTaken === false &&    (inp('look')||inp('inspect')||inp('search'))   &&    (inp('boat')||inp('moor'))     :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen. It's tied to the shore with a thick <span>rope</span>.";
                break;
            case roomNum === 6 &&   ropeTaken === false &&    (inp('look')||inp('inspect')||inp('search'))   &&    (inp('rope'))     :
                output.innerHTML = "The <span>rope</span> seems to be the only thing about the boat that is still in decent condition.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "You're standing on the shore of a lovely lake. The boat is still siting half-sunk near the shore.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect')||inp('search'))   &&    (inp('boat')||inp('moor'))     :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect')||inp('search'))   &&    (inp('rope'))     :
                output.innerHTML = "The <span>rope</span> is gone. You took it, remember?";
                break;
            case roomNum === 6 &&    (inp('take')||inp('grab')||inp('pocket'))   &&    (inp('rope'))     :
                output.innerHTML = "You untie the <span>rope</span> and put it in your pocket.";
                haveRope = true;
                ropeTaken = true;
                room6Switch();
                break;

            // INTERACT WITH WATER
            case (roomNum === 5 || roomNum === 6) &&    (inp('look')||inp('inspect')||inp('search'))   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank'))     :
                output.innerHTML = "The water is cool and clear, and a few fish drift lazily along. You search around the banks, but don't find anything particularly useful.";
                break;
            case (roomNum === 5 || roomNum === 6) &&    (inp('swim')||inp('dive')||inp('jump'))   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank'))     :
                output.innerHTML = "You didn't bring a swim suit! The water seems cold anyway.";
                break;
            case (roomNum === 5 || roomNum === 6) &&    (inp('catch')||inp('grab')||inp('take')||inp('lure'))   &&    (inp('fish'))     :
                output.innerHTML = "You try to catch a fish, but they are way too fast! They probably prefer the water anyway.";
                break;
            
            // INTERACT WITH TREES
            case ((roomNum === 7 || roomNum === 8 || roomNum === 13))  &&    (inp('tree'))     :
                output.innerHTML = "There aren't any trees around here.";
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 9)  :
                output.innerHTML = "These trees look much too and the branches too weak to climb.";
                break;
            case (roomNum === 9)  &&    (inp('tree'))   &&   (inp('look')||inp('inspect')||inp(''))  :
                output.innerHTML = "The trees here look ancient. You get the feeling this is a very old part of the forest.";
                break;
            case ((roomNum !== 4) || marbleDown === true) &&   (inp('look')||inp('inspect')||inp('search'))   &&    (inp('tree'))     :
                output.innerHTML = "You search around the trees, but don't find anything.";
                break;
            case (roomNum === 4)  &&  marbleDown === false  && (inp('look')||inp('inspect')||inp('search'))   &&    (inp('tree'))     :
                output.innerHTML = "There's a <span>cat</span> in the tree! ...it doesn't seem to want to come down.";
                catDiscovered = true;
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 4)  && marbleDown === false && catDiscovered === true:
                output.innerHTML = "You start to climb the tree, but the <span>cat</span> hisses and swipes a paw at you. Rude!";
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 4)  && marbleDown === false :
                output.innerHTML = "You start to climb the tree... but there's a <span>cat</span> in the tree! It hisses and swipes a paw at you. Rude!";
                break;
            case inp('climb')  &&    inp('tree')    :
                output.innerHTML = "You carefully climb up the nearest tree. The branches are thin near the top, so you find a sturdy perch and look out over the forest. To the <span>south</span> you can see a river, or maybe a lake, and some hills to the <span>west</span>.<br><br>You enjoy the view for a minute, then climb down.";
                break;

            // GET FLOWER
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('look')||inp('inspect')||inp('search'))   &&    (inp('flower'))     :
                output.innerHTML = "You look at the flowers. Nice :)";
                break;
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('pick')||inp('take')||inp('gather'))   &&    (inp('flower'))  && haveFlower === false   :
                output.innerHTML = 'You pick one of the blue flowers and carefully put it in your pocket.';
                haveFlower = true;
                break;
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('pick')||inp('take')||inp('gather')||inp('pocket'))   &&    (inp('flower'))  && haveFlower === true   :
                output.innerHTML = 'You already have a flower in your pocket!';
                break;

            // INTERACT WITH ROCKS
            case (inp('pick')||inp('take')||inp('gather')||inp('pocket'))   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "Naaah, you won't need that.";
                break;
            case inp('under')   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "You under some of the rocks, but don't find anything other than some very confused bugs.";
                break;
            case (inp('search')||inp('inspect')||inp('look'))   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "You look at the rocks. They look rocky.";
                break;
            case inp('eat')  &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "...";
                break;

            // INTERACT WITH GRASS
            case (inp('pick')||inp('take')||inp('gather')||inp('pocket'))   &&    inp('grass')    :
                output.innerHTML = "You probably won't need that.";
                break;
            case (inp('search')||inp('inspect')||inp('look'))   &&    inp('grass')    :
                output.innerHTML = "You search the grass, but don't find anything.";
                break;
            case inp('touch')  &&    inp('grass')    :
                output.innerHTML = "You touch the grass. Feels good, not gonna lie.";
                break;
            case (inp('lie')||inp('lay'))  &&    inp('grass')    :
                output.innerHTML = "You lie down on the grass and watch the clouds float gently above you. It's comfy, but after a while starts to get a bit itchy. Makes you wish you'd brought a blanket.";
                break;
            case inp('smoke')  &&    inp('grass')    :
                output.innerHTML = "-_-";
                break;
            case inp('eat')  &&    inp('grass')    :
                output.innerHTML = "...why??";
                break;

            // DIG
            case inp('dig'):
            output.innerHTML = "You don't have anything to dig with, and you're not sure what you'd be looking for anyway.";
                break;

        // DEFAULT
            default:
                output.innerHTML = "Nothing happened.";
                break;
        };
        // CLEAR INPUT FORM
        userInput.value = "";
    }

// PRESSING ENTER 
    enterButton.addEventListener('click', processinput);

    // from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_trigger_button_enter
    var input = document.getElementById("userinput");
    input.addEventListener("keypress",
    function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("enterbutton").click();
        }
    });

// MAP IMAGE TRANSITIONS

</script>



</html>