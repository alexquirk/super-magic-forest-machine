<!DOCTYPE html>
<html lang="en">

<!-- HEAD-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Magic Forest Machine</title>
    <link rel="stylesheet" href="SMFMstyles.CSS">
    <style> @import url('https://fonts.googleapis.com/css2?family=DotGothic16&family=Press+Start+2P&display=swap'); </style>
</head>
<body>


<!-- THE MACHINE -->

<article id="themachine">
    
    <!-- VIEWER -->
        <img class="viewer" id= "map" src="./roomimages/smfmroom1.png" alt="map">
        <img class="viewer" id= "inventory1">
        <img class="viewer" id= "inventory2">
        <img class="viewer" id= "inventory3">
        <img class="viewer" id= "inventory4">
        <img class="viewer" id= "inventory5">
        <img class="viewer" id= "inventory6">

    <!-- OUTPUT AREA -->
    <div class="outputarea">
        <div id="output">You open your eyes and find yourself in a forest clearing. 
            In front of you stands a wooden <span>door</span>.
            <br><br>
            You try to remember how you got here, but your mind is fuzzy. "Guess I fell asleep," you think to yourself.
            <br><br>
            Try <span>looking around</span>.
        </div>
    </div>

    <!-- INPUT AREA -->
    <div class="inputarea">
        <input type="text" id="userinput" maxlength="25">
        <input type="button" id="enterbutton" value="ENTER">
    </div>
    <div class="borders"></div>
</article>

</body>


<!-- SCRIPT -->
<script>

//DECLARE VARIABLES
    const userInput = document.getElementById('userinput');
    const output = document.getElementById('output');
    const enterButton = document.getElementById('enterbutton');
    
    const removeItem = (item) => {
        for ( var i = 0; i < inventory.length; i++) { 
            if (inventory[i] === (item)) { 
                inventory.splice(i, 1); 
            }
        };           
    };

    let roomNum = 1;

    let checkingInventory = false;
    let doorUnlocked = false;
    let haveFlower = false;
    let boxUnlocked = false;
    let catDiscovered = false;
    let marbleDown = false;
    let marbleReunited = false;
    let ropeTaken = false;
    let haveRope = false;
    let ropeSet = false;
    let haveBox = false;
    let haveBoxKey = false;
    let mugTaken = false;
    let haveMug = false;
    let ghostGivenMug = false;
    let robotAwake = false;
    let haveCrystal = false;
    let haveFireflies = false;
    let firefliesReleased = false;
    let electroVineTaken = false;
    let haveRibbon = false;

    const inventory = [];

// INVENTORY

    const checkInventory = () => {
        if (inventory.length === 0) {
            return "You don't have anything in your pockets yet.<br><br>Maybe there is something useful nearby you can <span>take</span> with you?"
        } else {
            let inventoryText = ["You have "];
            for (var i = 0; i < inventory.length - 1; i++) {
                inventoryText.push(" " + inventory[i] + ",");
            };
            if (inventory.length > 1) {
                inventoryText.push(" and " + inventory[inventory.length -1]+ ".")
            } else {
                inventoryText.push(" " + inventory[inventory.length -1]+ "in your pocket.<br><br>Press 'ENTER' to return.")
            };
            return inventoryText.join('');
        };
        // document.getElementById("map").classList.toggle('blur');
    };
    const displayInventory = () => {
        if (haveFlower === true) {
                document.getElementById("inventory6").src="./inventoryimages/flower.png";
                checkingInventory =true;
        }
    };


// ROOM SWITCHING FUNCTIONS

    const room4Switch = () => {
        if (marbleDown === false) {return document.getElementById("map").src="./roomimages/smfmroom4a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom4b.png"};
    };
    const room10Switch = () => {
        if (ropeSet === false) {return document.getElementById("map").src="./roomimages/smfmroom10a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom10b.png"};
    }; 
    const room12Switch = () => {
        if (robotAwake === false) {return document.getElementById("map").src="./roomimages/smfmroom12a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom12b.png"};
    }; 
    const room7Switch = () => {
        if (firefliesReleased === false) {return document.getElementById("map").src="./roomimages/smfmroom7a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom7b.png"};
    }; 
    const room9Switch = () => {
        if (ghostGivenMug === false) {return document.getElementById("map").src="./roomimages/smfmroom9a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom9b.png"};
    }; 
    const room6Switch = () => {
        if (ropeTaken === false) {return document.getElementById("map").src="./roomimages/smfmroom6a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom6b.png"};
    }; 
    const room13Switch = () => {
        if (mugTaken === false) {return document.getElementById("map").src="./roomimages/smfmroom13a.png"}
        else {return document.getElementById("map").src="./roomimages/smfmroom13b.png"};
    }; 

// USER INPUT
    const inp = (arg) => {
        return userInput.value.toLowerCase().includes(arg);
    }
    const processinput = () => {
        //clear inventory
        document.getElementById("inventory1").src="";document.getElementById("inventory2").src="";document.getElementById("inventory3").src="";document.getElementById("inventory4").src="";document.getElementById("inventory5").src="";document.getElementById("inventory6").src="";
        
        // GET INPUT
        switch (true) {
    
        // GLOBAL
            case inp("hint") || inp("help"):
                output.innerHTML = "There is something strange about this place...<br><br>Try <span>looking around</span>, <span>walking</span> in a direction, or <span>inspecting</span> things.<br><br>You can also <span>take</span> useful objects, <span>use</span> objects, or <span>check your pockets</span> to see what objects you have with you.";
                break;
            case inp("nap") || inp("sleep"):
                output.innerHTML = "You're not really tired.";
                break; 
            case inp('chill') || (inp('not') && inp('much')):
                output.innerHTML = "cool cool";
                break;
            case inp('hello') || inp('hi'):
                output.innerHTML = "Hi :)";
                break;
            case inp('what') && inp('up'):
                output.innerHTML = "Nothing much, hbu";
                break;
            case inp('reset'):
                roomNum = 1;
                document.getElementById("map").src="./roomimages/smfmroom1.png";
                userInput.value = "";
                output.innerHTML = "";
                break;

        // CHECK INVENTORY
            case ((inp("check")||inp('look')||inp('inspect'))   &&    inp('pockets')) || inp('inventory')  :
                userInput.value = "";
                output.innerHTML = checkInventory();
                displayInventory();
                break;
            
        // TRAVEL

            // GOING EAST
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('east')||inp('right'))  :
                switch (roomNum) {
                    case 9:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dark and dense to go any further east.";
                        break;
                    case 1:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 13:
                        userInput.value = "";
                        output.innerHTML = "There's nowhere to go!";
                        break;
                    case 4:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 6;
                        room6Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 3:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further east.";
                        break;
                    case 6:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further east.";
                        break;
                    case 11:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 10:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png"
                        output.innerHTML = "";
                        break;
                    case 2:
                        roomNum = 9;
                        room9Switch();
                        output.innerHTML = "";
                        break;
                    case 12:
                        roomNum = 5;
                        room4Switch();
                        document.getElementById("map").src="./roomimages/smfmroom5.png"
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            output.innerHTML = "There's nowhere to go that way."
                        };
                        break;
                };
                break;

            // GOING NORTH
            case roomNum !== 13 && (inp("walk")||inp('go')||inp('travel'))   &&    (inp('north')||inp('up')||inp('straight')||inp('forward'))   :
                switch (roomNum) {
                    case 3:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further north.";
                        break;
                    case 2:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further north.";
                        break;
                    case 9:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dark and dense to go any further north.";
                        break;
                    case 1:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 6:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 12:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 10:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            output.innerHTML = "There's nowhere to go that way."
                        };
                        break;
                    case 11:
                        roomNum = 7;
                        room7Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                };
                break;

            // GOING WEST
            case (inp("walk")||inp('go')||inp('travel'))   &&    (inp('west')||inp('left'))   :
                switch (roomNum) {
                    case 11:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further west.";
                        break;
                    case 10:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further west.";
                        break;
                    case 13:
                        userInput.value = "";
                        output.innerHTML = "There's nowhere to go!";
                        break;
                    case 12:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dense to go any further west, and there is a fence in the way.";
                        break;
                    case 3:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 2:
                        roomNum = 4;
                        room4Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 6:
                        roomNum = 5;
                        document.getElementById("map").src="./roomimages/smfmroom5.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 9:
                        roomNum = 2;
                        document.getElementById("map").src="./roomimages/smfmroom2.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 1:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        roomNum = 12;
                        room12Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 7:
                        if (firefliesReleased === false) {
                            output.innerHTML = "It's too dark to go anywhere!"
                        } else {
                            roomNum = 8;
                            document.getElementById("map").src="./roomimages/smfmroom8.png"
                            output.innerHTML = ""
                        }
                        userInput.value = "";
                        break;

                };
                break;

            // GOING SOUTH
            case roomNum !== 10 && (inp("walk")||inp('go')||inp('travel'))   &&    (inp('south')||inp('down'))   :
                switch (roomNum) {
                    case 9:
                        userInput.value = "";
                        output.innerHTML = "The forest is too dark and dense to go any further south.";
                        break;
                    case 2:
                        roomNum = 3;
                        document.getElementById("map").src="./roomimages/smfmroom3.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 1:
                        roomNum = 5;
                        document.getElementById("map").src="./roomimages/smfmroom5.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 4:
                        roomNum = 1;
                        document.getElementById("map").src="./roomimages/smfmroom1.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 3:
                        roomNum = 6;
                        room6Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 5:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - the opposite shore is too far to swim.";
                        break;
                    case 13:
                        userInput.value = "";
                        output.innerHTML = "There's nowhere to go!";
                        break;
                    case 6:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - the opposite shore is too far to swim.";
                        break;
                    case 12:
                        userInput.value = "";
                        output.innerHTML = "You can't go any farther south - the opposite shore is too far to swim.";
                        break;
                    case 7:
                        roomNum = 11;
                        document.getElementById("map").src="./roomimages/smfmroom11.png";
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                    case 11:
                        roomNum = 10;
                        room10Switch();
                        userInput.value = "";
                        output.innerHTML = "";
                        break;
                };
                break;

            // SPECIAL CASE FOR ROOM 10 BECAUSE OF GOING "DOWN" THE WELL
            case roomNum === 10 && inp("go")   &&    inp('down')  && ropeSet === true  :
                output.innerHTML = "You test the rope, and then carefully lower yourself into the <span>well</span>...";
                roomNum = 13;
                room13Switch();
                break;
            case roomNum === 10 && (inp("walk")||inp('go')||inp('travel'))   &&    (inp('south')||inp('down'))   :
                roomNum = 12;
                room12Switch();
                userInput.value = "";
                output.innerHTML = "";
                break;

            // SPECIAL CARE FOR ROOM 13
            case roomNum === 13 && inp("go")   &&    inp('up') :
                roomNum = 10;
                room10Switch();
                break;
            case roomNum === 13 && (inp("walk")||inp('go')||inp('travel'))   &&    (inp('up')||inp('forward')||inp('straight')||inp('north'))   :
                userInput.value = "";
                output.innerHTML = "There's nowhere to go!";
                break;
            
                    
            // DEFAULT TRAVEL
            case (inp("walk")||inp('go')||inp('travel')):
                userInput.value = "";
                output.innerHTML = "Where do you want to go?";
                break;

            // ROOM 1
            case roomNum === 1 &&    (inp('open')||inp('try')||inp('use'))    &&    (inp('door')||inp('handle')||inp("knob")) && doorUnlocked === false   :
                output.innerHTML = "The door is locked.";
                break;
            case roomNum === 1 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "In front of you, a <span>door frame</span> stands in the middle of a forest clearing scattered with stones and flowers. To the <span>north</span> and <span>east</span> the forest grows dark and dense. To the <span>south</span>, you can hear the distant sound of running water. To the <span>northwest</span> you can see a rocky outcropping above the trees.";
                break;
            case roomNum === 1 &&    (inp('inspect')||inp('look')||inp('search')||inp('check'))    &&    (inp('door')||inp('frame'))     :
                output.innerHTML = "The <span>door</span> and it's <span>frame</span> are made of a hearty oak wood. It's worn, but sturdy. Something tells you it's been hear a long time.";
                break;
            case roomNum === 1 &&    inp('unlock')   &&    (inp('door')||inp('handle'))   &&  doorUnlocked === false  && haveBoxKey === true :
                output.innerHTML = "You try to unlock the <span>door</span> with the <span>key</span> you found down by the lake... but it doesn't fit the lock!<br><br>Now that you look closer, the <span>key</span> is shiny silver, but the lock on the <span>door</span> is a dull iron.<br><br>Maybe this <span>key</span> fits something else?";
                break;
            case roomNum === 1 &&    inp('unlock')   &&    (inp('door')||inp('handle'))   &&  doorUnlocked === false  :
                output.innerHTML = "You don't have the <span>key</span>. Maybe it's nearby?";
                break;
            case roomNum === 1 &&    (inp('look')||inp('inspect')||inp('try'))   &&    (inp('lock')||inp('handle')||inp('knob'))     :
                output.innerHTML = "The door's gnob and lock are simple and a bit rusty, but strong. You try to push it open, but it won't budge.";
                break;
            case roomNum === 1 &&    inp('knock') || inp('nok'):
                output.innerHTML = "You knock on the door, but nothing happens.";
                break;
            case roomNum === 1 &&    inp('who') || inp('there'):
                output.innerHTML = "Lol you thought.";
                break;

            // ROOM 3
            case roomNum === 3 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest is a bit darker here. There is a <span>stump</span> in the middle of the clearing. The forest is too dense to travel any further east from here.";
                break;
            case roomNum === 3 &&    (inp('inspect')||inp('look')||inp('search')||inp('check'))    &&    (inp('stump'))     :
                output.innerHTML = "Looks like a good place to sit and rest. You wonder how long ago the tree was cut down, but you're stumped.";
                break;
            case roomNum === 3 &&    (inp('sit')||inp('rest'))     :
                output.innerHTML = "You sit down on the stump to rest for a minute. It's comfier than you would have thought.";
                break;

            // ROOM 2
            case roomNum === 2 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest is much denser and darker here, the the air is filled with <span>fireflies</span> that bathe the woods in a warm light.";
                break;
            case roomNum === 2 &&    (inp('inspect')||inp('look')||inp('search'))    &&    (inp('fire'))     :
                output.innerHTML = "You've never seen <span>fireflies</span> this bright before! They illuminate the whole forest.";
                break;
            case (inp('box')||inp('catch')||inp('take')||inp('gather')||inp('grab')||inp('get'))   &&    inp('fire')  &&  boxUnlocked === true  && haveFireflies === false :
                output.innerHTML = 'You catch a <span>firefly</span>, and very carefully put it in the <span>box</span> and close the lid.<br><br>You catch another, and another... and pretty soon the <span>box</span> is full of <span>fireflies</span>!';
                removeItem("a <span>wooden box</span>");
                inventory.push("a <span>box of fireflies</span>");
                haveFireflies = true;
                break;
            case (inp('box')||inp('chest')||inp('catch')||inp('take')||inp('gather')||inp('grab')||inp('get'))   &&    inp('fire')  &&  haveFireflies === true :
                output.innerHTML = 'The <span>box</span> is already full of <span>fireflies</span>!';
                break;
            case (inp('catch')||inp('take')||inp('gather')||inp('grab')||inp('get'))   &&    inp('fire')  && haveBox === false  :
                output.innerHTML = 'After a couple attempts, you catch a <span>firefly</span> in you hands. You cup it gently and its soft glow illuminates your fingers. After a few moments, you release it to join the others.<br><br>"If only I had somewhere to keep it," you think.';
                break;
            case (inp('catch')||inp('take')||inp('gather')||inp('grab')||inp('get'))   &&    inp('fire')  && haveBox === true  :
                output.innerHTML = 'After a couple attempts, you catch a <span>firefly</span> in you hands. You cup it gently and its soft glow illuminates your fingers. After a few moments, you release it to join the others.<br><br>"I bet I could keep some of them in this <span>box</span> if I get it open," you think.';
                break;

            // ROOM 4
            case roomNum === 4 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The forest is darker here. A big tree stands in the middle of the clearing.";
                break;
            case roomNum === 4 &&    inp('play')   &&    inp('cat')   && marbleReunited === false && haveRibbon === false:
                output.innerHTML = "You try to get the attention of the <span>cat</span>, but it doesn't seem that interested in you.<br><br>Maybe if you had something to play with...";
                break;
            case roomNum === 4 &&  catDiscovered === true  &&  marbleReunited === false  &&  inp('talk')   &&    inp('cat'):
            output.innerHTML = "The <span>cat</span> doesn't really seem interested in talking.";
                break;

            // ROOM 5
            case roomNum === 5 &&    (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "The lake is rather lovely and the shore littered with rocks. If only you'd brought a beach umbrella!";
                break;
            case roomNum === 5 &&    inp('look')   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank')) && haveBoxKey === false    :
                output.innerHTML = "The water is cool and clear, and a few fish drift lazily along.<br><br>You think you spy <span>something</span> shining under the water near the rocks.";
                break;
            case roomNum === 5 &&  haveBoxKey === false &&  (inp('search')||inp('inspect')||inp('look')||inp('check'))   &&    (inp('water')||inp('rock')||inp('stone')||inp('pebble')||inp("shore"))    :
                output.innerHTML = "You search the rocks by the shore... and find a <span>key</span>! Nice!!<br><br>You put the <span>key</span> in you pocket.";
                haveBoxKey = true;
                inventory.push("a <span>silver key</span>");
                break;
            case roomNum === 5 &&    inp('look')   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank'))     :
                output.innerHTML = "The water is cool and clear, and a few fish drift lazily along.";
                break;

            // ROOM 6
            case roomNum === 6 &&  ropeTaken === false &&  (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "You're standing on the shore of a lovely lake. There is a boat tied to a mooring nearby, but it doesn't exactly look seaworthy.";
                break;
            case roomNum === 6 &&   ropeTaken === false &&   haveBox === false  &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('boat')||inp('moor'))     :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen. It's tied to the shore with a thick <span>rope</span>.<br><br>You look into the bottom of the boat and find an old wooden box with a <span>lock</span> on it.<br><br>You put the <span>box</span> in your pocket.";
                haveBox = true;
                inventory.push("a <span>wooden box</span>");
                break;
            case roomNum === 6 &&   ropeTaken === false &&    (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('boat')||inp('moor'))     :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen. It's tied to the shore with a thick <span>rope</span>.";
                break;
            case roomNum === 6 &&   ropeTaken === false &&    (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('rope'))     :
                output.innerHTML = "The <span>rope</span> seems to be the only thing about the boat that is still in decent condition.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "You're standing on the shore of a lovely lake. The boat is still siting half-sunk near the shore.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('boat')||inp('moor'))  && haveBox === false   :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen.<br><br>You look into the bottom of the boat and find an old wooden box with a <span>lock</span> on it.<br><br>You put the <span>box</span> in your pocket.";
                haveBox === true;
                inventory.push("a <span>wooden box</span>");
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('boat')||inp('moor'))  && haveBox === true   :
                output.innerHTML = "The boat is half-sunk and looks ancient. The wood on the bottom is almost completely rotted through, and the paddles are nowhere to be seen.";
                break;
            case roomNum === 6 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('rope'))     :
                output.innerHTML = "The <span>rope</span> is gone. You took it, remember?";
                break;
            case roomNum === 6 &&   ropeTaken === true && (inp('take')||inp('grab')||inp('pocket')||inp('get'))   &&    (inp('rope'))     :
                output.innerHTML = "You already took the <span>rope.</span>";
                break;    
            case roomNum === 6 &&    (inp('take')||inp('grab')||inp('pocket')||inp('untie')||inp('remove')||inp('get'))   &&    (inp('rope'))     :
                output.innerHTML = "You untie the <span>rope</span> and put it in your pocket.";
                haveRope = true;
                ropeTaken = true;
                inventory.push("a <span>rope</span>")
                room6Switch();
                break;

            // ROOM 7
            case roomNum === 7 &&  (inp('look'))   &&    (inp('cave')||inp('around')) && firefliesReleased === false :
                output.innerHTML = "The air feels different here... but it's too dark to see anything...";
                break;
            case roomNum === 7 &&  (inp('inspect')||inp('search')||inp('check'))   &&    (inp('cave')||inp('around')) && firefliesReleased === false :
                output.innerHTML = "You feel your way around the <span>cave</span>. The ground is rocky and the walls smooth. It's much too dark to see anything...<br><br>You smash your shins against something hard a few times before abandoning your search.";
                break;

            // ROOM 10
            case roomNum === 10 &&  (inp('look')||inp('inspect'))   &&    (inp('forest')||inp('around'))     :
                output.innerHTML = "There's a stone <span>well</span> in the middle of the clearing.";
                break;
            case roomNum === 10 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('well'))     :
                output.innerHTML = "The <span>well</span> looks out and out of use. You look around for a bucket, but don't find anything.<br><br>You peer down into it, but it's too deep to see the bottom.";
                break;
            case roomNum === 10 &&  (inp('throw')||inp('drop')||inp('toss'))  &&  inp('rock')    :
                output.innerHTML = "You drop a rock into the <span>well</span>. It clatters off the walls for a few seconds before falling silent.<br><br>No splash... it must be dry.";
                break;
            case roomNum === 10 &&  (inp('throw')||inp('drop')||inp('toss'))  &&  inp('stick')    :
                output.innerHTML = "You throw a stick into the <span>well</span>. It clatters off the walls for a few seconds before falling silent.<br><br>No splash... it must be dry.";
                break;
            case roomNum === 10 &&  (inp('throw')||inp('drop')||inp('toss'))  &&  (inp('money')||inp('coin')||inp('penny')||inp('quarter')||inp('dime')||inp('nickel')) :
                output.innerHTML = "You search your <span>pockets</span> for a coin to throw in the well, but no luck.";
                break;
            case roomNum === 10 &&  (inp('throw')||inp('drop')||inp('toss'))  &&  inp('flower')  && haveFlower === true   :
                output.innerHTML = "You drop a <span>flower</span> into the <span>well</span>. It drifts lazily down into the darkness until you lose sight of it.";
                haveFlower = false;
                removeItem("a <span>blue flower</span>");
                break;
            case roomNum === 10 &&  (inp('throw')||inp('drop')||inp('toss'))  &&  inp('flower') &&    (inp('well'))  && haveFlower === false   :
                output.innerHTML = "You don't have a <span>flower</span> to drop!";
                break;
            case roomNum === 10 &&  (inp('jump')||inp('fall'))   &&    (inp('well'))     :
                output.innerHTML = "For a moment you imagine jumping into the <span>well</span>... What's that old phrase? \"L'appel du vide...\"<br><br>You decide to keep your feet on the ground.";
                break;
            case roomNum === 10 &&  inp('climb') &&   (inp('well')||inp('down'))  && ropeSet === false :
                output.innerHTML = "You consider trying to climb down the <span>well</span>, but the walls are slippery and you're not sure if you'd be able to get back up again...";
                break;
            case roomNum === 10 &&  (inp('use')||inp('tie')||inp('attach')||inp('set')||inp('throw')||inp('drop')||inp('toss'))   &&    (inp('rope'))   &&  haveRope === true  :
                ropeSet = true;
                haveRope = false;
                removeItem("a <span>rope</span>");
                room10Switch();
                output.innerHTML = "You tie the <span>rope</span> to the top of the <span>well</span>. It seems pretty secure... fingers crossed!";
                break;
            case roomNum === 10 &&  (inp('climb')||inp('down')) &&   inp('well')  && ropeSet === true :
                output.innerHTML = "You test the rope, and then carefully lower yourself into the <span>well</span>...";
                roomNum = 13;
                room13Switch();
                break;
            case roomNum === 10 &&  ropeSet === true &&  (inp('take')||inp('grab')||inp('pocket')||inp('untie')||inp('remove')||inp('get'))   &&    (inp('rope'))     :
                output.innerHTML = "You untie the <span>rope</span> and put it in your pocket.";
                haveRope = true;
                ropeSet = false;
                inventory.push("a <span>rope</span>");
                room10Switch();
                break;
            case roomNum === 10 && inp('wish') :
                output.innerHTML = "You make a wish.... but it's secret!";
                break;
            
            // ROOM 11
            case roomNum === 11 &&  (inp('look')||inp('inspect')||inp('search'))   &&    (inp('forest')||inp('around')) :
                output.innerHTML = "There's a large entrance to a <span>cave</span> to the <span>north</span>. It looks pretty dark inside...";
                break;
            case roomNum === 11 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('cave')) :
                output.innerHTML = "The <span>cave</span> is so dark you can hardly see past the threshold...";
                break;
            case roomNum === 11 &&  (inp('go')||inp('enter')||inp('explore'))   &&    (inp('cave')||inp('cavern')||inp('rocks')) :
                roomNum = 7;
                room7Switch();
                userInput.value = "";
                output.innerHTML = "";
                break;

            // ROOM 13
            case roomNum === 13 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('well')||inp('around'))  && mugTaken === false  :
                output.innerHTML = "It's dark... there's just enough light to see around you. The ground is dry and littered with rocks and grass and... what's this? A <span>mug</span>?";
                break;
            case roomNum === 13 &&  (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('well')||inp('around'))  && mugTaken === true  :
                output.innerHTML = "It's dark... there's just enough light to see around you. The ground is dry and littered with rocks and grass. You can see the spot in the ground where the <span>mug</span> used to be.";
                break;
            case roomNum === 13 &&  (inp('look')||inp('inspect'))   &&    (inp('mug'))  && mugTaken === false   :
                output.innerHTML = "The <span>mug</span> is lying in the darkness of the well. It looks like there is a desert scene painted on it... Somebody must have dropped it down here.";
                break;
            case roomNum === 13 &&  (inp('take')||inp('grab')||inp('pocket')||inp('get'))   &&    (inp('mug'))  && mugTaken === false   :
                output.innerHTML = "You put the <span>mug</span> in your pocket.";
                haveMug =true;
                mugTaken = true;
                inventory.push("an <span>old mug</span>");
                room13Switch();
                break;
            case roomNum === 13 &&  (inp('take')||inp('grab')||inp('pocket')||inp('get'))   &&    (inp('mug'))  && mugTaken === true   :
                output.innerHTML = "You already took the <span>mug</span>.";
                break;
            case roomNum === 13 &&  (inp('climb')|| (inp('go') && inp('up')) ):
                output.innerHTML = "You climb back out of the well and into the sunlight.";
                roomNum = 10;
                room10Switch();
                break;

            // RELEASE FIREFLIES
            case roomNum !== 7 && haveFireflies=== true && (inp('release')||inp('open'))   &&    (inp('box')||inp('chest')||inp('fireflies'))  :
                output.innerHTML = 'You release the <span>fireflies</span> into the air. They linger for a moment, glimmering quietly, before floating up and away.<br><br>"Maybe they\'re going back to join their friends", you think.';
                haveFireflies = false;
                removeItem("a <span>box of fireflies</span>");
                inventory.push("a <span>wooden box</span>");
                break;
            case roomNum === 7 && haveFireflies=== true && (inp('release')||inp('open'))   &&    (inp('box')||inp('chest')||inp('fireflies'))  :
                output.innerHTML = 'You open the <span>box</span>, and the <span>fireflies</span> fill the cave with a brilliant light!';
                firefliesReleased = true;
                haveFireflies = false;
                removeItem("a <span>box of fireflies</span>");
                inventory.push("a <span>wooden box</span>");
                room7Switch();
                break;

            // INTERACT WITH WATER
            case (roomNum === 5 || roomNum === 6 || roomNum === 12) &&    (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank')||inp('shore'))     :
                output.innerHTML = "The water is cool and clear, and a few fish drift lazily along. You search around the banks, but don't find anything particularly useful.";
                break;
            case (roomNum === 5 || roomNum === 6 || roomNum === 12) &&    (inp('swim')||inp('dive')||inp('jump'))   &&    (inp('water')||inp('creek')||inp('river')||inp('lake')||inp('stream')||inp('bank'))     :
                output.innerHTML = "You didn't bring a swim suit! The water seems cold anyway.";
                break;
            case (roomNum === 5 || roomNum === 6 || roomNum === 12) &&    (inp('catch')||inp('grab')||inp('take')||inp('lure')||inp('get'))   &&    (inp('fish'))     :
                output.innerHTML = "You try to catch a fish, but they are way too fast! They probably prefer the water anyway.";
                break;
            
            // INTERACT WITH TREES / CAT
            case ((roomNum === 7 || roomNum === 8 || roomNum === 13))  &&    (inp('tree'))     :
                output.innerHTML = "There aren't any trees around here.";
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 9)  :
                output.innerHTML = "These trees look much too and the branches too weak to climb.";
                break;
            case (roomNum === 9)  &&    (inp('tree'))   &&   (inp('look')||inp('inspect')||inp(''))  :
                output.innerHTML = "The trees here look ancient. You get the feeling this is a very old part of the forest.";
                break;
            case ((roomNum !== 4) || marbleDown === true) &&   (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('tree'))     :
                output.innerHTML = "You search around the trees, but don't find anything.";
                break;
            case (roomNum === 4)  &&  marbleDown === false  && (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('tree'))     :
                output.innerHTML = "There's a <span>cat</span> in the tree! ...it doesn't seem to want to come down.";
                catDiscovered = true;
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 4)  && marbleDown === false && catDiscovered === true:
                output.innerHTML = "You start to climb the tree, but the <span>cat</span> hisses and swipes a paw at you. Rude!";
                break;
            case inp('climb')  &&    inp('tree')  && (roomNum === 4)  && marbleDown === false :
                output.innerHTML = "You start to climb the tree... but there's a <span>cat</span> in the tree! It hisses and swipes a paw at you. Rude!";
                catDiscovered = true;
                break;
            case inp('climb')  &&    inp('tree')    :
                output.innerHTML = "You carefully climb up the nearest tree. The branches are thin near the top, so you find a sturdy perch and look out over the forest. There's a lake to the <span>south</span> you can see a river, or maybe a lake, and some stony outcroppings to the <span>north west</span>. Beyond that the forest extends far into the distance.<br><br>You enjoy the view for a minute, then climb down.";
                break;

            // UNLOCK THE BOX
            case (inp('unlock')||inp('open')||inp('key'))   &&    (inp('box')||inp('chest'))    :
                output.innerHTML = "You try to open the <span>box</span> with the <span>key</span>...<br><br>...And it works! The <span>box</span> opens with a satisfying click.<br><br>Inside the box you find a <span>red ribbon</span>. You put the <span>ribbon</span> in your pocket.";
                boxUnlocked = true;
                haveRibbon = true;
                inventory.push("a <span>red ribbon</span>");
                break;

            // GET FLOWER
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('look')||inp('inspect')||inp('search')||inp('check'))   &&    (inp('flower'))     :
                output.innerHTML = "You look at the flowers. Nice :)";
                break;
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('pick')||inp('take')||inp('gather')||inp('pocket')||inp('get'))   &&    (inp('flower'))  && haveFlower === false   :
                output.innerHTML = 'You pick one of the <span>blue flowers</span> and carefully put it in your pocket.<br><br>Maybe it will be useful later?';
                haveFlower = true;
                inventory.push("a <span>blue flower</span>");
                break;
            case (roomNum === 1 || roomNum === 3 || roomNum === 5)   &&    (inp('pick')||inp('take')||inp('gather')||inp('pocket')||inp('get'))   &&    (inp('flower'))  && haveFlower === true   :
                output.innerHTML = 'You already have a <span>flower</span> in your pocket!';
                break;
            case (inp('pick')||inp('take')||inp('gather')||inp('pocket')||inp('get'))   &&    (inp('flower')) :
                output.innerHTML = "There aren't any flowers around here.";
                break;

            // INTERACT WITH ROCKS
            case (inp('pick')||inp('take')||inp('gather')||inp('pocket')||inp('get'))   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "You don't need that right now.";
                break;
            case (inp('under')||inp('search')||inp('check'))   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "You search under some of the rocks, but don't find anything other than some very confused bugs.";
                break;
            case (inp('inspect')||inp('look')||inp('check'))   &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "You look at the rocks. They look rocky.";
                break;
            case inp('eat')  &&    (inp('rock')||inp('stone')||inp('pebble'))    :
                output.innerHTML = "...";
                break;

            // INTERACT WITH GRASS
            case (inp('pick')||inp('take')||inp('gather')||inp('pocket')||inp('get'))   &&    inp('grass')    :
                output.innerHTML = "You probably won't need that.";
                break;
            case (inp('search')||inp('inspect')||inp('look')||inp('check'))   &&    inp('grass')    :
                output.innerHTML = "You search the grass, but don't find anything.";
                break;
            case inp('touch')  &&    inp('grass')    :
                output.innerHTML = "You touch the grass. Feels good, not gonna lie.";
                break;
            case (inp('lie')||inp('lay'))  &&    inp('grass')    :
                output.innerHTML = "You lie down on the grass and watch the clouds float gently above you. It's comfy, but after a while starts to get a bit itchy. Makes you wish you'd brought a blanket.";
                break;
            case inp('smoke')  &&    inp('grass')    :
                output.innerHTML = "-_-";
                break;
            case inp('eat')  &&    inp('grass')    :
                output.innerHTML = "...why??";
                break;

            // DIG
            case inp('dig'):
            output.innerHTML = "You don't have anything to dig with, and you're not sure what you'd be looking for anyway.";
                break;

            // CLEARING INVENTORY
            case inp('') && checkingInventory === true:
                checkingInventory = false;
                output.innerHTML = "";
                break;

        // DEFAULT
            default:
                output.innerHTML = "Nothing happened.";
                checkingInventory = false;
                break;
        };
        // CLEAR INPUT FORM
        userInput.value = "";
    }

// PRESSING ENTER 
    enterButton.addEventListener('click', processinput);

    // from https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_trigger_button_enter
    var input = document.getElementById("userinput");
    input.addEventListener("keypress",
    function(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            document.getElementById("enterbutton").click();
        }
    });

// MAP IMAGE TRANSITIONS

</script>



</html>